---
layout: post
comments: true
categories: Cplus
---
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      inlineMath: [['$','$']]
    }
  });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>

### c++接口(抽象类)

接口描述了类的行为和功能,而不需要完成类的实现

C++接口是使用抽象类来实现的,抽象类与数据抽象不混淆,数据抽象是一个把实现细节与相关数据分离开的概念.

如果累中至少有一个函数被声明为纯虚函数,则这个类就是抽象类.纯虚函数是通过在声明中使用"=0"来置顶的,如下所示:

~~~c++
class Box
{
   public:
      // 纯虚函数
      virtual double getVolume() = 0;
   private:
      double length;      // 长度
      double breadth;     // 宽度
      double height;      // 高度
};
~~~

设计抽象类（通常为ABC）的目的，是为了给其他类提供一个可以继承的适当的基类。抽象类不能被用于实例化对象，它只能作为接口使用。如果试图实例化一个抽象的对象，会导致变异错误。
因此，如果一个ABC的自雷需要被实例化，则必须实现每个虚函数，这也意味着C++支持使用ABC声明接口。如果没有在派生类中重写虚函数，就尝试实例化该类的对象，会导致变异错误。
可用于实例化对象的类称为具体类。

~~~c++
class Shape
{
public:
	//提供接口框架的纯虚函数
	virtual int getArea()=0;
	void setWidth(int w)
	{
		width=w;
	}
	void setHeight(int h)
	{
		height=h;
	}
protected:
	int width;
	int height;
};

class Rectangle: public Shape
{
public:
	int getArea()
	{
		return (width*height);
	}
};

class Triangle: public Shape
{
public:
	int getArea()
	{
		return (width*height)/2;
	}
};

int main(void)
{
	Rectangle Rect;
	Triangle Tri;

	Rect.setWidth(5);
	Rect.setHeight(7);
	//输出对象的面积
	cout<<"Total Rectangle area:"<<Rect.getArea()<<endl;

	Tri.setWidth(5);
	Tri.setHeight(7);
	cout<<"Total Triangle area:"<<Tri.getArea()<<endl;
	system("pause");
	return 0;
}

~~~

设计策略

面向对象的系统可能会使用一个抽象基类作为所有的外部应用程序提供一个适当的、通用的、标准化的接口。然后，派生类通过继承抽象基类，就把所有类似的操作继承下来。
外部应用程序提供的功能（即共有函数）在抽象基类中是以纯虚函数的形式存在的。这些纯虚函数在相应的派生类中被实现。
这个架构也使得新的应用程序可以很容易的被添加到系统中，即使是在系统被定义之后依然可以如此。